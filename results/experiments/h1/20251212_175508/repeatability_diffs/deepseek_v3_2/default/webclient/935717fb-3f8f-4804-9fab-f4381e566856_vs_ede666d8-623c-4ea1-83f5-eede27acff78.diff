--- 935717fb-3f8f-4804-9fab-f4381e566856
+++ ede666d8-623c-4ea1-83f5-eede27acff78
@@ -1,16 +1,14 @@
 @@FILE:Dockerfile::Dockerfile
 # Build stage
-FROM node:20-alpine AS builder
+FROM node:18-alpine AS builder
 
 WORKDIR /app
 
 # Copy package files
 COPY package.json package-lock.json* ./
+RUN npm ci --only=production
 
-# Install dependencies
-RUN npm install
-
-# Copy source files
+# Copy source code
 COPY . .
 
 # Build the application
@@ -19,16 +17,15 @@
 # Production stage
 FROM nginx:alpine
 
-# Copy built files from builder stage
+# Copy built assets from builder stage
 COPY --from=builder /app/dist /usr/share/nginx/html
 
-# Copy custom nginx configuration
+# Copy nginx configuration
 COPY nginx.conf /etc/nginx/conf.d/default.conf
 
 # Expose port 80
 EXPOSE 80
 
-# Start nginx
 CMD ["nginx", "-g", "daemon off;"]
 @@FILE:K8s::k8s/deployment.yaml
 apiVersion: apps/v1
@@ -53,6 +50,7 @@
         imagePullPolicy: IfNotPresent
         ports:
         - containerPort: 80
+          name: http
         resources:
           requests:
             memory: "64Mi"
@@ -62,28 +60,16 @@
             cpu: "100m"
         livenessProbe:
           httpGet:
-            path: /health
+            path: /
             port: 80
           initialDelaySeconds: 10
           periodSeconds: 10
         readinessProbe:
           httpGet:
-            path: /health
+            path: /
             port: 80
           initialDelaySeconds: 5
           periodSeconds: 5
----
-apiVersion: v1
-kind: Service
-metadata:
-  name: webclient
-spec:
-  selector:
-    app: webclient
-  ports:
-  - port: 80
-    targetPort: 80
-  type: ClusterIP
 @@FILE:K8s::k8s/ingress.yaml
 apiVersion: networking.k8s.io/v1
 kind: Ingress
@@ -104,3 +90,19 @@
             name: webclient
             port:
               number: 80
+@@FILE:K8s::k8s/service.yaml
+apiVersion: v1
+kind: Service
+metadata:
+  name: webclient
+  labels:
+    app: webclient
+spec:
+  selector:
+    app: webclient
+  ports:
+  - port: 80
+    targetPort: 80
+    protocol: TCP
+    name: http
+  type: ClusterIP