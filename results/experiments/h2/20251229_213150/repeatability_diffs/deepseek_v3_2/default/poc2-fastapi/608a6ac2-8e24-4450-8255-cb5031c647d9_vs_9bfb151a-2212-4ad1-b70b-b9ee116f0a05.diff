--- 608a6ac2-8e24-4450-8255-cb5031c647d9
+++ 9bfb151a-2212-4ad1-b70b-b9ee116f0a05
@@ -14,7 +14,7 @@
 RUN pip install --no-cache-dir -r requirements.txt
 
 # Copy application code
-COPY app/ ./app/
+COPY ./app ./app
 
 # Expose port
 EXPOSE 8000
@@ -25,98 +25,85 @@
 apiVersion: apps/v1
 kind: Deployment
 metadata:
-  name: fastapi-deployment
-  labels:
-    app: poc2-fastapi
-    component: api
+  name: fastapi
+  namespace: default
 spec:
   replicas: 1
   selector:
     matchLabels:
-      app: poc2-fastapi
-      component: api
+      app: fastapi
   template:
     metadata:
       labels:
-        app: poc2-fastapi
-        component: api
+        app: fastapi
     spec:
       containers:
-        - name: fastapi
-          image: fastapi-app
-          imagePullPolicy: IfNotPresent
-          ports:
-            - containerPort: 8000
-              name: http
-          env:
-            - name: DATABASE_URL
-              value: "postgresql://postgres:postgres@postgres-service:5432/postgres"
-          resources:
-            requests:
-              memory: "256Mi"
-              cpu: "250m"
-            limits:
-              memory: "512Mi"
-              cpu: "500m"
-          livenessProbe:
-            httpGet:
-              path: /
-              port: 8000
-            initialDelaySeconds: 30
-            periodSeconds: 10
-            timeoutSeconds: 5
-          readinessProbe:
-            httpGet:
-              path: /
-              port: 8000
-            initialDelaySeconds: 5
-            periodSeconds: 5
-            timeoutSeconds: 3
+      - name: fastapi
+        image: fastapi
+        imagePullPolicy: IfNotPresent
+        ports:
+        - containerPort: 8000
+        env:
+        - name: DATABASE_URL
+          value: "postgresql://user:password@postgres:5432/dbname"
+        resources:
+          requests:
+            memory: "256Mi"
+            cpu: "250m"
+          limits:
+            memory: "512Mi"
+            cpu: "500m"
+        livenessProbe:
+          httpGet:
+            path: /
+            port: 8000
+          initialDelaySeconds: 30
+          periodSeconds: 10
+        readinessProbe:
+          httpGet:
+            path: /
+            port: 8000
+          initialDelaySeconds: 5
+          periodSeconds: 5
 @@FILE:K8s::k8s/fastapi-service.yaml
 apiVersion: v1
 kind: Service
 metadata:
-  name: fastapi-service
-  labels:
-    app: poc2-fastapi
-    component: api
+  name: fastapi
+  namespace: default
 spec:
   selector:
-    app: poc2-fastapi
-    component: api
+    app: fastapi
   ports:
-    - port: 8000
-      targetPort: 8000
-      name: http
-  type: ClusterIP
+  - port: 80
+    targetPort: 8000
+    protocol: TCP
 @@FILE:K8s::k8s/ingress.yaml
 apiVersion: networking.k8s.io/v1
 kind: Ingress
 metadata:
   name: fastapi-ingress
-  labels:
-    app: poc2-fastapi
-    component: ingress
+  namespace: default
+  annotations:
+    nginx.ingress.kubernetes.io/rewrite-target: /
 spec:
   rules:
-    - host: poc2-fastapi.rasztabiga.me
-      http:
-        paths:
-          - path: /
-            pathType: Prefix
-            backend:
-              service:
-                name: fastapi-service
-                port:
-                  number: 8000
+  - host: poc2-fastapi.rasztabiga.me
+    http:
+      paths:
+      - path: /
+        pathType: Prefix
+        backend:
+          service:
+            name: fastapi
+            port:
+              number: 80
 @@FILE:K8s::k8s/postgres-pvc.yaml
 apiVersion: v1
 kind: PersistentVolumeClaim
 metadata:
   name: postgres-pvc
-  labels:
-    app: poc2-fastapi
-    component: database
+  namespace: default
 spec:
   accessModes:
     - ReadWriteOnce
@@ -129,98 +116,74 @@
 kind: Secret
 metadata:
   name: postgres-secret
-  labels:
-    app: poc2-fastapi
-    component: database
+  namespace: default
 type: Opaque
 data:
-  postgres-password: cG9zdGdyZXM=  # postgres in base64
-  postgres-user: cG9zdGdyZXM=     # postgres in base64
-  postgres-db: cG9zdGdyZXM=       # postgres in base64
+  postgres-password: cGFzc3dvcmQ=  # password
+  postgres-user: dXNlcg==  # user
+  postgres-db: ZGJuYW1l  # dbname
 @@FILE:K8s::k8s/postgres-service.yaml
 apiVersion: v1
 kind: Service
 metadata:
-  name: postgres-service
-  labels:
-    app: poc2-fastapi
-    component: database
+  name: postgres
+  namespace: default
 spec:
   selector:
-    app: poc2-fastapi
-    component: database
+    app: postgres
   ports:
-    - port: 5432
-      targetPort: 5432
-      name: postgres
+  - port: 5432
+    targetPort: 5432
   clusterIP: None
 @@FILE:K8s::k8s/postgres-statefulset.yaml
 apiVersion: apps/v1
 kind: StatefulSet
 metadata:
-  name: postgres-statefulset
-  labels:
-    app: poc2-fastapi
-    component: database
+  name: postgres
+  namespace: default
 spec:
-  serviceName: postgres-service
+  serviceName: postgres
   replicas: 1
   selector:
     matchLabels:
-      app: poc2-fastapi
-      component: database
+      app: postgres
   template:
     metadata:
       labels:
-        app: poc2-fastapi
-        component: database
+        app: postgres
     spec:
       containers:
-        - name: postgres
-          image: postgres:15-alpine
-          ports:
-            - containerPort: 5432
-              name: postgres
-          env:
-            - name: POSTGRES_PASSWORD
-              valueFrom:
-                secretKeyRef:
-                  name: postgres-secret
-                  key: postgres-password
-            - name: POSTGRES_USER
-              valueFrom:
-                secretKeyRef:
-                  name: postgres-secret
-                  key: postgres-user
-            - name: POSTGRES_DB
-              valueFrom:
-                secretKeyRef:
-                  name: postgres-secret
-                  key: postgres-db
-          volumeMounts:
-            - name: postgres-storage
-              mountPath: /var/lib/postgresql/data
-          resources:
-            requests:
-              memory: "256Mi"
-              cpu: "250m"
-            limits:
-              memory: "512Mi"
-              cpu: "500m"
-          livenessProbe:
-            tcpSocket:
-              port: 5432
-            initialDelaySeconds: 30
-            periodSeconds: 10
-          readinessProbe:
-            exec:
-              command:
-                - pg_isready
-                - -U
-                - postgres
-            initialDelaySeconds: 5
-            periodSeconds: 5
+      - name: postgres
+        image: postgres:15-alpine
+        ports:
+        - containerPort: 5432
+        env:
+        - name: POSTGRES_DB
+          valueFrom:
+            secretKeyRef:
+              name: postgres-secret
+              key: postgres-db
+        - name: POSTGRES_USER
+          valueFrom:
+            secretKeyRef:
+              name: postgres-secret
+              key: postgres-user
+        - name: POSTGRES_PASSWORD
+          valueFrom:
+            secretKeyRef:
+              name: postgres-secret
+              key: postgres-password
+        volumeMounts:
+        - name: postgres-storage
+          mountPath: /var/lib/postgresql/data
+        resources:
+          requests:
+            memory: "256Mi"
+            cpu: "250m"
+          limits:
+            memory: "512Mi"
+            cpu: "500m"
       volumes:
-        - name: postgres-storage
-          persistentVolumeClaim:
-            claimName: postgres-pvc
+      - name: postgres-storage
+        persistentVolumeClaim:
+          claimName: postgres-pvc