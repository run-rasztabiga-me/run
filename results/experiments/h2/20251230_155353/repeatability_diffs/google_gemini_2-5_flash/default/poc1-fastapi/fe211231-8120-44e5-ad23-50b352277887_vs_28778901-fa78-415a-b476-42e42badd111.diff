--- fe211231-8120-44e5-ad23-50b352277887
+++ 28778901-fa78-415a-b476-42e42badd111
@@ -1,17 +1,19 @@
 @@FILE:Dockerfile::Dockerfile
-FROM python:3.11-slim-buster
+
+FROM python:3.10-slim-buster
 
 WORKDIR /app
 
 COPY requirements.txt .
 RUN pip install --no-cache-dir -r requirements.txt
 
-COPY ./app .
+COPY app/ .
 
 EXPOSE 8000
 
 CMD ["uvicorn", "main:app", "--host", "0.0.0.0", "--port", "8000"]
 @@FILE:K8s::k8s/deployment.yaml
+
 apiVersion: apps/v1
 kind: Deployment
 metadata:
@@ -41,20 +43,31 @@
           limits:
             memory: "128Mi"
             cpu: "200m"
+        livenessProbe:
+          httpGet:
+            path: /
+            port: 8000
+          initialDelaySeconds: 5
+          periodSeconds: 5
+        readinessProbe:
+          httpGet:
+            path: /
+            port: 8000
+          initialDelaySeconds: 5
+          periodSeconds: 5
 @@FILE:K8s::k8s/ingress.yaml
 apiVersion: networking.k8s.io/v1
 kind: Ingress
 metadata:
   name: poc1-fastapi-ingress
   annotations:
-    nginx.ingress.kubernetes.io/ssl-redirect: "false"
-    nginx.ingress.kubernetes.io/use-regex: "true"
+    nginx.ingress.kubernetes.io/rewrite-target: /
 spec:
   rules:
-  - host: "poc1-fastapi.rasztabiga.me"
+  - host: poc1-fastapi.rasztabiga.me
     http:
       paths:
-      - path: "/"
+      - path: /
         pathType: Prefix
         backend:
           service:
@@ -62,6 +75,7 @@
             port:
               number: 80
 @@FILE:K8s::k8s/service.yaml
+
 apiVersion: v1
 kind: Service
 metadata:
@@ -75,4 +89,3 @@
     - protocol: TCP
       port: 80
       targetPort: 8000
-  type: ClusterIP