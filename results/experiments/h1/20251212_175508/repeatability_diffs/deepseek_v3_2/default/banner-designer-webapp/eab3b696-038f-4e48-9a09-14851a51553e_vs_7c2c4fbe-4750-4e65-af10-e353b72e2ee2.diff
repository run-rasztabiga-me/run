--- eab3b696-038f-4e48-9a09-14851a51553e
+++ 7c2c4fbe-4750-4e65-af10-e353b72e2ee2
@@ -1,14 +1,14 @@
 @@FILE:Dockerfile::Dockerfile
 # Build stage
-FROM node:18-alpine AS build
+FROM node:20-alpine AS build
 
 WORKDIR /app
 
 # Copy package files
-COPY package*.json ./
+COPY package.json package-lock.json ./
 
 # Install dependencies
-RUN npm ci --only=production
+RUN npm ci
 
 # Copy source code
 COPY . .
@@ -22,8 +22,8 @@
 # Copy built assets from build stage
 COPY --from=build /app/dist /usr/share/nginx/html
 
-# Copy nginx configuration
-COPY nginx.conf /etc/nginx/nginx.conf
+# Copy custom nginx configuration
+COPY nginx.conf /etc/nginx/conf.d/default.conf
 
 # Expose port 80
 EXPOSE 80
@@ -76,6 +76,9 @@
           periodSeconds: 5
           timeoutSeconds: 3
           failureThreshold: 1
+        env:
+        - name: NODE_ENV
+          value: "production"
 @@FILE:K8s::k8s/ingress.yaml
 apiVersion: networking.k8s.io/v1
 kind: Ingress
@@ -83,7 +86,7 @@
   name: banner-designer-webapp
   annotations:
     nginx.ingress.kubernetes.io/rewrite-target: /
-    nginx.ingress.kubernetes.io/ssl-redirect: "true"
+    nginx.ingress.kubernetes.io/ssl-redirect: "false"
 spec:
   rules:
   - host: banner-designer-webapp.rasztabiga.me